<html>
    <head>
        <title></title>
    </head>
    <body>
		<input type="button" id="export" value="按钮"/>
		<div id="content"></div>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>
    <script>
        window.onload = function redirectPage() {
            showJson();
			//CreateJSON();
			
            //window.location = "https://lyl52121.github.io/workspase/";
        }
// { "name":"runoob", "alexa":10000, "site":"www.runoob.com" }

        function showJson(){
            console.log("show");
            var test;
            if(window.XMLHttpRequest){
                test = new XMLHttpRequest();
            }else if(window.ActiveXObject){
                test = new window.ActiveXObject();
            }else{
                alert("请升级至最新版本的浏览器");
            }
            console.log("parse");
            if(test !=null){
                console.log("parse");
                test.open("GET","index.json");
                console.log("GET");
                test.send(null);
                test.onload=function(){
                    console.log("onreadystatechange");
                    if(test.readyState==4&&test.status==200){
						console.log(test.responseText);
                        var obj = JSON.parse(test.responseText);
						console.log(obj.person[0].name);
						console.log(obj.person[0].sex);
						console.log("-------------");
                        console.log(obj.rows);
						console.log(obj);
                        for (var o in obj){
                            console.log("o"+ o);
							console.log(o.length);
							for(var i in o){
								console.log(i);
							}
							console.log(o[0]+ "0000");
                        }
                    }
                };
            
            }
        }
		var button = document.getElementById("export");
 		button.addEventListener("click", CreateJSON, false);
		function CreateJSON(){
			console.log("触发");
			let data = {
				name : "李媛丽",
				age : 23 
			}

			var content = JSON.stringify(data);
			var blob = new Blob([content], {type: "text/plain;charset=utf-8"});
			saveAs(blob, "save.json");
		}

		function showMarkdown()
		{
			// 创建XMLHttpRequest对象
			var xmlhttp;
			if (window.XMLHttpRequest)
			{
				// IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
				xmlhttp=new XMLHttpRequest();
			}
			else
			{
				// IE6, IE5 浏览器执行代码
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			
			// 向服务器发送请求，获取你需要的Markdown文档
			xmlhttp.open("GET","info.md",true);
			xmlhttp.send();
			
			// 得到服务器响应后，对得到的Markdown文档进行解析
			xmlhttp.onreadystatechange=function()
			{
				if (xmlhttp.readyState==4 && xmlhttp.status==200)
				{
					// 这里调用了marked框架中的marked函数实现Markdown2HTML的解析
					document.getElementById("content").innerHTML=marked(xmlhttp.responseText);
				}
			}
			
			
			
    	}



    </script>
</html>